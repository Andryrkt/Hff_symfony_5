{% extends 'base.html.twig' %}

{% block title %}premier formulaire du dom !
{% endblock %}

{% block body %}
	<div class="container ">
		<div class="card p-3 mt-3">
			<div class="card-body">
				<div class="row">
					<div class="col-12">
						<h3 class="perso-titre">Demande d'Ordre de Mission</h3>
					</div>
				</div>
				{{ form_start(form, {
					'attr': { 
            			'data-controller': 'dom-first-form',
            			'id': 'dom_form1'
        			} 
				})}}
				<div class="row">
					<div class="col-md-6">
						{{ form_row(form.emetteur.agenceEmetteur) }}
					</div>
					<div class="col-md-6">
						{{ form_row(form.emetteur.serviceEmetteur) }}
					</div>
				</div>
				<div
					class="row">
					<!-- Type de Mission -->
					<div class="col-6">
						{{form_row(form.sousTypeDocument, {
							'attr': { 
								'data-dom-first-form-target': 'sousTypeDocument',
								'data-action': 'change->dom-first-form#updateCategorie'
							} 
						})}}
					</div>

					<!-- Section Salarié -->
					<div class="col-6">
						{{ form_label(form.salarie) }}
						{{ form_widget(form.salarie, { 
							'attr': { 
								'data-dom-first-form-target': 'salarieType',
								'data-action': 'change->dom-first-form#toggleFields'
							} 
						}) }}
					</div>

				</div>
				<!-- Catégorie Dynamique -->
				<div class="row" data-dom-first-form-target="categorieGroup">
					{% if form.categorie is defined %}
						{{ form_row(form.categorie)}}
					{% endif %}
				</div>

				<!-- Champs Permanent (Matricule) -->
				<div class="row" data-dom-first-form-target="matriculeGroup">
					{{ form_label(form.matriculeNom) }}
					{{ form_widget(form.matriculeNom, {
						'attr': {
							'class': 'form-control custom-matricule-field',
							'data-placeholder': 'Sélectionnez un personnel',
							'data-dom-first-form-target': 'matriculeNomSelect',
							'style': 'width: 100%; display: none;'
						}
					}) }}

					{{ form_row(form.matricule, {
						'attr': { 
                			'data-dom-first-form-target': 'matriculeInput',
                            'class': 'form-control'
            			} 
					})}}
				</div>

				<!-- Champs Temporaire (Nom/Prénom/CIN) -->
				<div class="row">
					<div data-dom-first-form-target="nomGroup">
						{{ form_row(form.nom)}}
					</div>
					<div data-dom-first-form-target="prenomGroup">
						{{ form_row(form.prenom)}}
					</div>
					<div data-dom-first-form-target="cinGroup">
						{{ form_row(form.cin)}}
					</div>
				</div>


				<div class="row">
					<div class="mt-2">
						<button type="submit" class="btn btn-info fw-bold">
							Suivant
							<i class="fas fa-arrow-right"></i>
						</button>
					</div>
				</div>
				{{ form_end(form)}}
			</div>
		</div>
	</div>
{% endblock %}
