<turbo-frame id="user_access_list_for_user_{{ user.id }}">
	{% if accesses is defined and accesses|length > 0 %}
		<div class="access-list-container">
			<h6>Liste des accès pour
				{{ user.fullname }}</h6>
			<div class="table-responsive">
				<table class="table table-sm table-bordered">
					<thead class="table-light">
						<tr>
							<th>ID</th>
							<th>Nom de l'accès</th>
							<th>Description</th>
							<th>Actions</th>
						</tr>
					</thead>
					<tbody>
						{% for access in accesses %}
							<tr>
								<td>{{ access.id }}</td>
								<td>{{ access.name }}</td>
								<td>{{ access.description ?? 'N/A' }}</td>
								<td>
									<button class="btn btn-sm btn-outline-danger" data-action="click->user-access#removeAccess" data-user-access-user-id="{{ user.id }}" data-user-access-id="{{ access.id }}">
										Retirer
									</button>
								</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>

			{# Formulaire pour ajouter un accès #}
			<div class="mt-3">
				<h6>Ajouter un accès</h6>
				<form method="post" action="{{ path('admin_user_add_access', {'id': user.id}) }}" data-turbo-frame="user_access_list_for_user_{{ user.id }}">
					<div class="row g-2 align-items-center">
						<div class="col-auto">
							<select name="access_id" class="form-select form-select-sm" required>
								<option value="">Sélectionner un accès</option>
								{% for availableAccess in availableAccesses %}
									<option value="{{ availableAccess.id }}">{{ availableAccess.name }}</option>
								{% endfor %}
							</select>
						</div>
						<div class="col-auto">
							<button type="submit" class="btn btn-sm btn-success">Ajouter</button>
						</div>
					</div>
					<input type="hidden" name="_token" value="{{ csrf_token('add_access_' ~ user.id) }}">
				</form>
			</div>
		</div>
	{% else %}
		<div class="text-center py-3">
			<p class="text-muted mb-3">Aucun accès attribué à cet utilisateur.</p>

			{# Formulaire pour ajouter un accès #}
			<div class="mt-3">
				<h6>Ajouter un accès</h6>
				<form method="post" action="{{ path('admin_user_add_access', {'id': user.id}) }}" data-turbo-frame="user_access_list_for_user_{{ user.id }}">
					<div class="row g-2 align-items-center justify-content-center">
						<div class="col-auto">
							<select name="access_id" class="form-select form-select-sm" required>
								<option value="">Sélectionner un accès</option>
								{% for availableAccess in availableAccesses %}
									<option value="{{ availableAccess.id }}">{{ availableAccess.name }}</option>
								{% endfor %}
							</select>
						</div>
						<div class="col-auto">
							<button type="submit" class="btn btn-sm btn-success">Ajouter</button>
						</div>
					</div>
					<input type="hidden" name="_token" value="{{ csrf_token('add_access_' ~ user.id) }}">
				</form>
			</div>
		</div>
	{% endif %}
</turbo-frame>
