{# Titre #}
<div class="row mb-4">
    <div class="col">
        <h1 class="h2">Tableau de bord</h1>
        <p class="text-muted">Accédez rapidement aux différentes sections de l'application</p>
    </div>
</div>

{# Grille des vignettes - Utilise les data attributes de Bootstrap pour ouvrir le modal #}
<div class="row g-4">
    {% for card in cards %}
        <div class="col-xl-3 col-lg-4 col-md-6">
            <div class="card home-card h-100 shadow-sm" 
                 data-bs-toggle="modal" 
                 data-bs-target="#homeModal"
                 data-card-id="{{ loop.index0 }}"
                 style="cursor: pointer; transition: transform 0.2s;">
                <div class="card-body text-center p-4">
                    <div class="mb-3">
                        <i class="{{ card.icon }} fa-3x text-{{ card.color }}"></i>
                    </div>
                    <h5 class="card-title">{{ card.title }}</h5>
                    <p class="card-text text-muted small">{{ card.description }}</p>
                    <div class="mt-3">
                        <span class="badge bg-{{ card.color }}">{{ card.links|length }} liens</span>
                    </div>
                </div>
            </div>
        </div>
    {% endfor %}
</div>

{# Modal global - Le contrôleur Stimulus est maintenant attaché ici #}
<div class="modal fade" id="homeModal" tabindex="-1" aria-labelledby="homeModalLabel" aria-hidden="true" data-controller="modal">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="homeModalLabel" data-modal-target="modalTitle">Navigation</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="modalContent" data-modal-target="modalContent">
                {# Le contenu sera chargé dynamiquement via le contrôleur Stimulus #}
                <div class="text-center p-4">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Chargement...</span>
                    </div>
                    <p class="mt-2">Chargement des liens...</p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
            </div>
        </div>
    </div>
</div>
