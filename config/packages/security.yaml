security:
  enable_authenticator_manager: true

  # Configuration des firewalls
  firewalls:
    main:
      lazy: true
      form_login_ldap:
        login_path: app_login
        check_path: app_login
        service: Symfony\Component\Ldap\Ldap
        dn_string: "CN={username},OU=HFF Users,DC=fraise,DC=hff,DC=mg"
        default_target_path: /
      logout:
        path: app_logout

  # Contrôle des accès
  access_control:
    - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/, roles: ROLE_USER }

  # Fournisseur d'utilisateurs LDAP
  providers:
    ldap_users:
      ldap:
        service: Symfony\Component\Ldap\Ldap
        base_dn: "OU=HFF Users,DC=fraise,DC=hff,DC=mg"
        search_dn: "CN=Lanto ANDRIANADISON,OU=Informatique,OU=HFF Tana,OU=HFF Users,DC=fraise,DC=hff,DC=mg"
        search_password: "@Andryrkt2971*"
        default_roles: ROLE_USER
        uid_key: samaccountName

  # Password hashing (nécessaire même si LDAP ne l'utilise pas)
  password_hashers:
    Symfony\Component\Security\Core\User\PasswordAuthenticatedUserInterface: "auto"
